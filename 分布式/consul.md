## consul
> Consul是一种服务网格解决方案，提供具有服务发现，配置和分段功能的全功能控制平面。这些功能中的每一个都可以根据需要单独使用，也可以一起使用以构建完整的服务网格。Consul需要一个数据平面，并支持代理和本机集成模型。Consul附带了一个简单的内置代理，因此一切都可以直接使用，还支持Envoy等第三方代理集成。
### 概念
* Consul使用Gossip协议 来管理成员资格并向集群广播消息。所有这些都是通过使用Serf库提供的。Serf使用的八卦协议基于 “ SWIM：可扩展的弱一致性感染型过程组成员身份协议”，并进行了一些小改动 
### 主要特点
* 服务发现
* 运行状况检查
* K-V
* 安全的服务通信：Consul可以为服务生成和分发TLS证书
* 多数据中心
* CAP - [CP](https://www.consul.io/docs/intro/vs/serf)
* Gossip协议
* http API

### 服务发现
> 服务发现的主要目标之一是提供可用服务的目录。为此，代理提供了一种简单的服务定义格式来声明服务的可用性，并可能将其与健康检查关联起来。如果健康检查与服务相关联，则将其视为应用程序级别。服务在配置文件中定义，或者在运行时通过HTTP接口添加。
* 注册服务-服务定义
* 查询服务-DNS接口
* 监控服务-检查定义
  * Consul通过省略被标记为不正常的服务和节点，利用检查来维护准确的DNS查询结果
  * 健康检查选项
    * Script + Interval
    * HTTP + Interval
    * TCP + Interval
    * Alias
